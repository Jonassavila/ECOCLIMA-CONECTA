<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ECOCLIMA CONECTA ‚Äî Educa√ß√£o Ambiental</title>
  <meta name="description" content="Plataforma para educa√ß√£o ambiental e sustentabilidade no setor de climatiza√ß√£o" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root{
      --green-600:#0b6b3a;
      --green-400:#2fa36a;
      --blue-600:#0b4f66;
      --gray-900:#0f1724;
      --gray-700:#374151;
      --muted:#f4f6f8;
      --card-shadow: 0 8px 24px rgba(15,23,36,.08);
      --glass: rgba(255,255,255,0.92);
      --gap:18px;
    }
    *{box-sizing:border-box}
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0; color:var(--gray-900);
      background:linear-gradient(180deg,#f7fbf8 0%, #eef6fb 100%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Cabe√ßalho / Navega√ß√£o */
    header{
      position:sticky;
      top:0;
      background:rgba(255,255,255,0.95);
      backdrop-filter: blur(6px);
      border-bottom:1px solid #e6eef0;
      z-index:1000; /* Aumentado para ficar acima do mapa */
    }
    .container{max-width:1150px;margin:0 auto;padding:20px}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--green-600),var(--blue-600));display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-family:inherit}
    nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    nav a{color:var(--gray-700);text-decoration:none;font-weight:600}
    .cta{display:flex;gap:10px;align-items:center}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--green-600);color:white}
    .btn-ghost{background:transparent;color:var(--gray-700)}

    /* Se√ß√£o Hero */
    .hero{display:grid;grid-template-columns:1fr 480px;gap:36px;align-items:center;padding:36px 0} /* Reduzido de 48px para 36px */
    .hero h1{font-size:34px;margin:0 0 12px;line-height:1.05}
    .hero p{color:var(--gray-700);line-height:1.5}
    .hero .card{background:var(--glass);padding:18px;border-radius:14px;box-shadow:var(--card-shadow)}

    .hero-img{width:100%;height:320px;border-radius:14px;object-fit:cover;box-shadow:var(--card-shadow);display:block}

    /* Se√ß√µes */
    section{padding:24px 0} /* Reduzido de 36px para 24px */
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{
      background:white;
      padding:16px;
      border-radius:12px;
      box-shadow:var(--card-shadow);
      transition: transform 0.3s ease; /* Adicionada transi√ß√£o para todos os cards */
    }
    .card:hover {
      transform: translateY(-5px); /* Mesma anima√ß√£o dos cards de educa√ß√£o */
    }
    .muted{color:var(--gray-700)}

    /* Layout do Mapa */
    .map-wrap{
      display:grid;
      grid-template-columns:1fr 360px;
      gap:18px;
      align-items:start;
      margin-top:12px;
    }
    #map{
      width:100%;
      height:500px; /* Altura reduzida para combinar com a lateral */
      border-radius:12px;
      border:1px solid #e6eef0;
      position:relative; /* Garante que o z-index funcione */
      z-index:1; /* Mant√©m o mapa abaixo do header */
    }
    .map-sidebar{
      display:flex;
      flex-direction:column;
      gap:10px;
      height:500px; /* Mesma altura do mapa */
    }
    .search-box{display:flex;gap:8px}
    .search-box input{flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef0;font-size:14px}
    .search-box button{padding:10px 12px;border-radius:8px;border:0;background:var(--green-600);color:white;cursor:pointer}

    .listings{
      overflow:auto;
      max-height:380px; /* Ajustado para caber dentro da altura total */
      display:grid;
      gap:10px;
      flex:1;
    }

    /* Rodap√© */
    footer{padding:20px 0;color:var(--gray-700)} /* Reduzido de 28px para 20px */

    /* Detalhes visuais */
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--green-400),var(--blue-600));color:white;font-weight:700}
    .meta{font-size:13px;color:var(--gray-700);display:flex;gap:8px;align-items:center}

    /* Se√ß√£o de Educa√ß√£o */
    .education-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px; /* Reduzido de 24px para 20px */
    }
    .education-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s ease;
    }
    .education-card:hover {
      transform: translateY(-5px);
    }
    .education-card h3 {
      margin-top: 0;
      color: var(--green-600);
      border-bottom: 2px solid var(--green-400);
      padding-bottom: 8px;
    }
    .material-icon {
      font-size: 24px;
      margin-right: 10px;
      vertical-align: middle;
    }
    .legislation-list {
      margin: 12px 0;
      padding-left: 20px;
    }
    .legislation-list li {
      margin-bottom: 8px;
    }
    .example-box {
      background-color: #f0f9f4;
      border-left: 4px solid var(--green-400);
      padding: 12px;
      margin-top: 12px;
      border-radius: 0 8px 8px 0;
    }

    /* Design Responsivo */
    @media (max-width:1100px){
      .hero{grid-template-columns:1fr 360px}
      .map-wrap{grid-template-columns:1fr 320px}
    }
    @media (max-width:900px){
      nav ul{display:none}
      .hero{grid-template-columns:1fr}
      .map-wrap{
        grid-template-columns:1fr;
        gap:12px;
      }
      #map{height:420px}
      .map-sidebar{height:auto}
    }
    @media (max-width:600px){
      .logo{width:40px;height:40px}
      .hero-img{height:220px}
      #map{height:360px}
      .map-sidebar{height:auto}
    }

    /* Card de listagem */
    .listing-card{
      padding:10px;
      border-radius:10px;
      background:#fbfeff;
      border:1px solid #eef6f8;
      cursor:pointer;
      transition: transform 0.3s ease; /* Anima√ß√£o para os cards da lista tamb√©m */
    }
    .listing-card:hover {
      transform: translateY(-3px); /* Anima√ß√£o mais suave para os cards da lista */
    }
    .listing-card strong{display:block}
    .listing-meta{font-size:13px;color:var(--gray-700)}

    /* Estilos do Leaflet */
    .leaflet-popup-content { margin: 8px 12px; }
    .leaflet-popup-content-wrapper { border-radius: 8px; }
    .leaflet-container {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo">EC</div>
        <div>
          <div style="font-weight:800">ECOCLIMA CONECTA</div>
          <div style="font-size:12px;color:var(--gray-700)">Educa√ß√£o ambiental para climatiza√ß√£o</div>
        </div>
      </div>

      <nav>
        <ul>
          <li><a href="#home">Home</a></li>
          <li><a href="#sobre">Sobre</a></li>
          <li><a href="#mapa">Mapa</a></li>
          <li><a href="#educacao">Educa√ß√£o</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Home / Hero -->
    <section id="home" class="hero">
      <div>
        <div class="meta">Plataforma ‚Ä¢ Sustentabilidade ‚Ä¢ Educa√ß√£o Ambiental</div>
        <h1>Informa√ß√µes sobre descarte correto para um setor de climatiza√ß√£o mais sustent√°vel</h1>
        <p class="muted">Aprenda sobre legisla√ß√µes, obriga√ß√µes e pr√°ticas corretas para descarte de materiais. Reduza impactos ambientais e evite penalidades ‚Äî tudo em um s√≥ lugar.</p>

        <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap">
          <div class="card" style="flex:1;min-width:180px">
            <strong>Legisla√ß√µes</strong>
            <div class="muted" style="font-size:13px">Conhe√ßa as leis e regulamenta√ß√µes ambientais.</div>
          </div>
          <div class="card" style="flex:1;min-width:180px">
            <strong>Pontos de Descarte</strong>
            <div class="muted" style="font-size:13px">Localize pontos de coleta e empresas parceiras pr√≥ximas.</div>
          </div>
          <div class="card" style="flex:1;min-width:180px">
            <strong>Orienta√ß√µes</strong>
            <div class="muted" style="font-size:13px">Aprenda a descartar corretamente cada tipo de material.</div>
          </div>
        </div>
      </div>

      <div>
        <div class="card">
          <img class="hero-img" src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?q=80&w=1200&auto=format&fit=crop&s=placeholder" alt="imagem destaque educa√ß√£o ambiental"/>
        </div>
        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
          <div class="muted">Equipe: Jonas S. de Avila ‚Ä¢ Vitor R. Corr√™a ‚Ä¢ Pedro E. Kunzler ‚Ä¢ Gabriel O. Abreu ‚Ä¢ Eduardo Paier</div>
          <div class="pill">Prot√≥tipo</div>
        </div>
      </div>
    </section>

    <!-- Sobre -->
    <section id="sobre">
      <div style="display:flex;gap:22px;align-items:flex-start;flex-wrap:wrap">
        <div style="flex:1;min-width:260px">
          <h2>Sobre</h2>
          <p class="muted">O ECOCLIMA CONECTA nasceu para reduzir o descarte inadequado de materiais do setor de climatiza√ß√£o, promovendo educa√ß√£o ambiental e pr√°ticas sustent√°veis. A plataforma fornece informa√ß√µes sobre legisla√ß√µes, obriga√ß√µes e destina√ß√£o correta de res√≠duos.</p>

          <h3>Miss√£o</h3>
          <p class="muted">Promover a educa√ß√£o ambiental e a destina√ß√£o correta de res√≠duos, reduzindo impacto ambiental e custos para profissionais.</p>

          <h3>Vis√£o</h3>
          <p class="muted">Ser refer√™ncia regional em educa√ß√£o ambiental para o setor de climatiza√ß√£o, apoiando a economia circular.</p>

          <h3>Valores</h3>
          <ul class="muted">
            <li>Transpar√™ncia</li>
            <li>Sustentabilidade</li>
            <li>Educa√ß√£o</li>
            <li>Praticidade</li>
          </ul>
        </div>

        <div style="width:320px;min-width:240px">
          <div class="card">
            <strong>Problema que resolvemos</strong>
            <p class="muted" style="font-size:14px">Descarte incorreto, falta de conhecimento sobre legisla√ß√µes ambientais e dificuldade de encontrar informa√ß√µes confi√°veis ‚Äî causando danos ambientais e penalidades.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Mapa de Descarte -->
    <section id="mapa">
      <h2>Mapa de Descarte</h2>
      <p class="muted">Encontre pontos de descarte, recicladores e empresas parceiras.</p>

      <div class="map-wrap">
        <!-- Mapa -->
        <div>
          <div id="map" class="card"></div>
        </div>

        <!-- Barra lateral -->
        <aside class="map-sidebar">
          <div class="card" style="display:flex;flex-direction:column;gap:12px;height:100%;">
            <strong>Pontos de Descarte</strong>
            <div class="muted" style="font-size:13px">Clique em um ponto para ver detalhes</div>
            <div style="display:flex;gap:8px">
              <input id="list-search" placeholder="Filtrar lista (nome / endere√ßo)" style="flex:1;padding:8px;border-radius:8px;border:1px solid #e6eef0"/>
              <button class="btn btn-primary" id="applyFilterBtn">Aplicar</button>
            </div>
            <hr style="border:none;border-top:1px solid #eef6f8;margin:8px 0"/>
            <div id="listings" class="listings"></div>
          </div>
        </aside>
      </div>
    </section>

    <!-- Educa√ß√£o Ambiental -->
    <section id="educacao">
      <h2>Educa√ß√£o Ambiental</h2>
      <p class="muted">Informa√ß√µes completas sobre legisla√ß√µes, obriga√ß√µes e pr√°ticas corretas para descarte de diferentes tipos de materiais.</p>

      <div class="education-grid">
        <!-- Alum√≠nio, cobre, papel√£o, pl√°stico e isopor -->
        <div class="education-card">
          <h3><span class="material-icon">‚ôªÔ∏è</span> Materiais Recicl√°veis</h3>
          <p><strong>Alum√≠nio, cobre, papel√£o, pl√°stico e isopor</strong></p>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>Lei n¬∫ 12.305/2010 ‚Äì Pol√≠tica Nacional de Res√≠duos S√≥lidos (PNRS)</li>
            <li>Decreto n¬∫ 10.936/2022 ‚Äì regulamenta a PNRS</li>
            <li>Leis estaduais e municipais de coleta seletiva</li>
          </ul>
          
          <h4>√ìrg√£os respons√°veis</h4>
          <ul>
            <li>IBAMA (n√≠vel federal)</li>
            <li>Secretarias estaduais e municipais de meio ambiente e limpeza urbana</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Geradores de res√≠duos (ind√∫strias, com√©rcios, resid√™ncias) devem separar materiais recicl√°veis</li>
            <li>Munic√≠pios precisam manter sistemas de coleta seletiva e destina√ß√£o adequada</li>
            <li>Empresas devem adotar log√≠stica reversa quando aplic√°vel</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Papel√£o, alum√≠nio e cobre podem ser vendidos a cooperativas ou sucateiros. Pl√°stico e isopor devem ser encaminhados para reciclagem ou ecopontos.
          </div>
        </div>

        <!-- Entulho de obra -->
        <div class="education-card">
          <h3><span class="material-icon">üèóÔ∏è</span> Entulho de Obra</h3>
          <p><strong>Res√≠duos da constru√ß√£o civil</strong></p>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>Lei n¬∫ 12.305/2010 (PNRS)</li>
            <li>Resolu√ß√£o CONAMA n¬∫ 307/2002 ‚Äì diretrizes para res√≠duos da constru√ß√£o civil</li>
            <li>Resolu√ß√£o CONAMA n¬∫ 448/2012 ‚Äì atualiza√ß√£o da 307</li>
          </ul>
          
          <h4>Classifica√ß√£o do entulho</h4>
          <ul>
            <li><strong>Classe A:</strong> materiais reutiliz√°veis (tijolo, concreto, cer√¢mica)</li>
            <li><strong>Classe B:</strong> recicl√°veis (pl√°stico, papel, metal, vidro)</li>
            <li><strong>Classe C:</strong> res√≠duos sem tecnologia vi√°vel de reciclagem</li>
            <li><strong>Classe D:</strong> perigosos (tintas, solventes, amianto)</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Construtoras devem apresentar Plano de Gerenciamento de Res√≠duos da Constru√ß√£o Civil (PGRCC)</li>
            <li>Transportadores precisam estar licenciados</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Restos de concreto podem ser triturados e usados em bases de pavimento. Metais e cabos el√©tricos devem ser encaminhados para reciclagem.
          </div>
        </div>

        <!-- Eletr√¥nicos -->
        <div class="education-card">
          <h3><span class="material-icon">üíª</span> Eletr√¥nicos</h3>
          <p><strong>E-lixo, placas, baterias</strong></p>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>PNRS (Lei n¬∫ 12.305/2010)</li>
            <li>Decreto n¬∫ 10.936/2022</li>
            <li>Lei estadual SP n¬∫ 13.576/2009 (primeira lei sobre e-lixo no Brasil)</li>
          </ul>
          
          <h4>Projetos em tramita√ß√£o</h4>
          <ul>
            <li>PL 4094/2024 ‚Äì cria programa nacional de coleta e reciclagem de eletr√¥nicos</li>
            <li>PL 194/2024 ‚Äì endurece regras para descarte de baterias</li>
          </ul>
          
          <h4>√ìrg√£os respons√°veis</h4>
          <ul>
            <li>IBAMA, √≥rg√£os estaduais, munic√≠pios</li>
            <li>Empresas fabricantes/importadoras</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Implantar log√≠stica reversa para eletroeletr√¥nicos, pilhas e baterias</li>
            <li>Lojas devem oferecer pontos de coleta</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Celulares antigos e placas de computador devem ser entregues em ecopontos. Baterias de notebook t√™m descarte controlado por conter metais t√≥xicos.
          </div>
        </div>

        <!-- Fluidos refrigerantes -->
        <div class="education-card">
          <h3><span class="material-icon">‚ùÑÔ∏è</span> Fluidos Refrigerantes</h3>
          <p><strong>Ar-condicionado, geladeiras, freezers</strong></p>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>Conven√ß√£o de Montreal (1987) ‚Äì tratado internacional sobre subst√¢ncias que destroem a camada de oz√¥nio</li>
            <li>Regulamenta√ß√µes do IBAMA (controle de importa√ß√£o, comercializa√ß√£o e destina√ß√£o de gases)</li>
            <li>Normas ABNT (ex: NBR 16069 ‚Äì seguran√ßa em fluidos inflam√°veis)</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Substituir fluidos nocivos (ex: CFCs e HCFCs) por gases menos poluentes (HFCs, naturais)</li>
            <li>Recolhimento e regenera√ß√£o obrigat√≥ria por t√©cnicos credenciados</li>
            <li>Proibido liberar gases na atmosfera</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Oficinas de refrigera√ß√£o devem ter equipamento de recolhimento. G√°s R-22 (HCFC) est√° em processo de elimina√ß√£o no Brasil.
          </div>
        </div>

        <!-- Motores e pe√ßas met√°licas -->
        <div class="education-card">
          <h3><span class="material-icon">‚öôÔ∏è</span> Motores e Pe√ßas Met√°licas</h3>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>Lei n¬∫ 12.305/2010 (PNRS)</li>
            <li>Lei n¬∫ 9.605/1998 (Crimes Ambientais)</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Encaminhar motores e sucatas met√°licas para recicladoras licenciadas</li>
            <li>Empresas devem comprovar destina√ß√£o ambientalmente correta</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Motores usados podem ser vendidos para fundi√ß√µes ou recicladoras. Oficinas mec√¢nicas precisam ter contrato com empresa licenciada para destina√ß√£o de sucata.
          </div>
        </div>

        <!-- Res√≠duos em geral -->
        <div class="education-card">
          <h3><span class="material-icon">üóëÔ∏è</span> Res√≠duos em Geral</h3>
          
          <h4>Legisla√ß√µes principais</h4>
          <ul class="legislation-list">
            <li>Lei n¬∫ 9.605/1998 ‚Äì Lei de Crimes Ambientais</li>
            <li>Lei n¬∫ 15.088/2025 ‚Äì pro√≠be a importa√ß√£o de res√≠duos s√≥lidos para o Brasil (pl√°sticos, metais, papel, vidro)</li>
          </ul>
          
          <h4>Obriga√ß√µes</h4>
          <ul>
            <li>Classificar corretamente os res√≠duos</li>
            <li>Priorizar n√£o gera√ß√£o, redu√ß√£o, reutiliza√ß√£o e reciclagem</li>
            <li>Rejeitos devem ir para aterros licenciados</li>
          </ul>
          
          <h4>Puni√ß√µes</h4>
          <ul>
            <li>Multas que podem ultrapassar R$ 50 milh√µes em casos de grandes danos ambientais</li>
            <li>Responsabilidade civil, administrativa e penal</li>
          </ul>
          
          <div class="example-box">
            <strong>Exemplo pr√°tico:</strong> Prefeituras devem manter aterros sanit√°rios licenciados (lix√µes s√£o proibidos). Empresas s√£o obrigadas a prestar contas sobre a destina√ß√£o de seus res√≠duos.
          </div>
        </div>
      </div>
    </section>

    <footer style="margin-top:20px"> <!-- Reduzido de 28px para 20px -->
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div class="muted">¬© 2025 ECOCLIMA CONECTA ‚Äî Prot√≥tipo</div>
        <div class="muted">Equipe: Jonas S. de Avila, Vitor R. Corr√™a, Pedro E. Kunzler, Gabriel O. Abreu, Eduardo Paier</div>
      </div>
    </footer>
  </main>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Dados iniciais de exemplo
    const initialPoints = [
      { 
        id: 1, 
        name: 'Coleta Ratinho', 
        type: 'coleta', 
        lat: -29.6917, 
        lng: -51.1348, 
        address: 'RUA JOAO LUCIANO DA ROSA, 640 - CANUDOS, NOVO HAMBURGO, RS, 93542-610', 
        contact: 'Arnaldo Rodrigues - 51 98032-0064', 
        email: 'coletaratinho.business@gmall.com',
        notes: 'Res√≠duos: Ar condicionados',
        site: 'https://ratinhocoleta.com/oficial'
      },
      { 
        id: 2, 
        name: 'eSucata', 
        type: 'reciclador', 
        lat: -29.7600, 
        lng: -51.1470, 
        address: 'Avenida Gettilio Vargas, 519 - Sao Leopoldo, RS', 
        contact: 'Marcos Diniz - 51 99378-6133', 
        email: 'comercial@e-sucata.com',
        notes: 'Res√≠duos: Eletr√¥nicos e catalisadores automotivos',
        cnpj: '23.841.999/0003-69',
        site: 'https://www.e-sucata.com/quem-somos'
      },
      { 
        id: 3, 
        name: 'Empresarial', 
        type: 'reciclador', 
        lat: -29.3760, 
        lng: -51.1140, 
        address: 'Rua Tia Gretel, 46, Nova Petropolis - RS, 95150-000', 
        contact: 'Fernando Buhs - 54 98433-3009', 
        email: 'nandobuhs@hotmail.com',
        notes: 'Res√≠duos: Restos de obra e res√≠duos no geral',
        cnpj: '27.111.685/0001-08'
      },
      { 
        id: 4, 
        name: 'TF Residuos', 
        type: 'coleta', 
        lat: -30.1080, 
        lng: -51.2300, 
        address: 'Av. Palmira Gobbi, 498 - Humaita, Porto Alegre - RS, 90250-210', 
        contact: 'Jo√£o Fontes - 51 98912-6346', 
        email: 'tfresiduos@gmail.com',
        notes: 'Res√≠duos: Geral',
        cnpj: '53.410.202/0001-78'
      },
      { 
        id: 5, 
        name: 'Recicla RS', 
        type: 'reciclador', 
        lat: -29.1640, 
        lng: -51.1790, 
        address: 'ERS-122, 1850 - Cinquentenario, Caxias do Sul - RS, 95010-550', 
        contact: 'Ricardo Roese - 84 3477-1175', 
        email: 'comercial@recicla.rs',
        notes: 'Res√≠duos: Todo tipo de res√≠duo',
        cnpj: '41.182.707/30001-78',
        site: 'https://www.recicla.rs'
      }
    ];

    let map, markers = [];

    function initMap() {
      // Centro padr√£o (regi√£o de Taquara)
      const center = [-29.660, -51.134];

      map = L.map('map').setView(center, 12);

      // Adicionar tile layer do OpenStreetMap
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Carregar pontos
      renderMarkers(initialPoints);
      renderListings(initialPoints);

      // Event listeners
      document.getElementById('applyFilterBtn').addEventListener('click', applyListFilter);
      document.getElementById('list-search').addEventListener('input', applyListFilter);
    }

    function renderMarkers(points) {
      // Remover marcadores existentes
      markers.forEach(marker => map.removeLayer(marker));
      markers = [];

      points.forEach(item => {
        const marker = L.marker([item.lat, item.lng]).addTo(map);
        
        const popupContent = `
          <div style="min-width:200px">
            <strong>${escapeHtml(item.name)}</strong>
            <div style="font-size:13px;color:#555">${escapeHtml(item.type)}</div>
            <div style="margin-top:8px;font-size:13px">
              ${escapeHtml(item.address || '')}<br/>
              Contato: ${escapeHtml(item.contact || '')}<br/>
              ${item.email ? `E-mail: ${escapeHtml(item.email)}<br/>` : ''}
              ${item.cnpj ? `CNPJ: ${escapeHtml(item.cnpj)}<br/>` : ''}
              ${item.site ? `Site: <a href="${escapeHtml(item.site)}" target="_blank">${escapeHtml(item.site)}</a><br/>` : ''}
              <small>${escapeHtml(item.notes || '')}</small>
            </div>
          </div>`;
        
        marker.bindPopup(popupContent);
        marker._data = item;
        markers.push(marker);
      });
    }

    function renderListings(points) {
      const el = document.getElementById('listings');
      el.innerHTML = '';
      
      if (!points.length) {
        el.innerHTML = '<div class="muted">Nenhum ponto encontrado.</div>';
        return;
      }
      
      points.forEach(item => {
        const div = document.createElement('div');
        div.className = 'listing-card';
        div.innerHTML = `
          <strong>${escapeHtml(item.name)}</strong>
          <div class="listing-meta">${escapeHtml(item.address || '')}</div>
          <div style="margin-top:6px;font-size:13px">
            Contato: ${escapeHtml(item.contact || '')} ‚Ä¢ 
            <span style="font-weight:700">${escapeHtml(item.type)}</span><br/>
            ${item.email ? `<small>E-mail: ${escapeHtml(item.email)}</small><br/>` : ''}
            <small>${escapeHtml(item.notes || '')}</small>
          </div>`;
        
        div.addEventListener('click', () => {
          const marker = markers.find(m => m._data && m._data.id === item.id);
          if (marker) {
            map.setView(marker.getLatLng(), 15);
            marker.openPopup();
          }
        });
        
        el.appendChild(div);
      });
    }

    function applyListFilter() {
      const q = (document.getElementById('list-search').value || '').toLowerCase();
      const filtered = initialPoints.filter(p => {
        const hay = (p.name + p.address + p.notes + (p.contact || '') + (p.email || '')).toLowerCase();
        return !q || hay.includes(q);
      });
      
      renderMarkers(filtered);
      renderListings(filtered);
      
      if (filtered.length && map) {
        const firstPoint = filtered[0];
        map.setView([firstPoint.lat, firstPoint.lng], 12);
      }
    }

    function escapeHtml(text) {
      if (!text) return '';
      return text.replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;');
    }

    // Inicializar mapa quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', initMap);
  </script>
</body>
</html>